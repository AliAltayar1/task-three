import styles from "./OrderDetailContent.module.css";
import { useTranslation } from "react-i18next";
import { HashLink as Link } from "react-router-hash-link";
import { CartContext } from "../../../CartContext";
import { useContext } from "react";
import { AiFillDelete } from "react-icons/ai";

const OrderDetailsContent = () => {
  const { t } = useTranslation();
  const { cart, setCart } = useContext(CartContext);
  // const {  } = useContext(CartContext);
  let totalPrice = 0;

  const handleDeleteItem = (id) => {
    // Remove item from local storage
    const updatedCart = cart.filter((item) => item.title !== id);
    localStorage.setItem("cart", JSON.stringify(updatedCart));

    // Update cart state
    setCart(updatedCart);
  };

  return (
    <div className={styles.orderContent}>
      <div className={styles.cart}>
        <h2>{t("cart")}</h2>
        <p>{t("cart-desc")}</p>
        <div className={styles.items}>
          {cart.map((item) => {
            totalPrice += parseFloat(item.price);
            return (
              item.image &&
              item.title &&
              item.price && (
                <div key={item.title}>
                  <div className={styles.imgContanier}>
                    <img src={`${item.image}`} alt="plant1" />
                  </div>

                  <div className={styles.productName}>
                    <span>{item.title}</span>
                    <div
                      onClick={(e) => {
                        handleDeleteItem(item.title);
                      }}
                    >
                      <span>
                        <AiFillDelete />
                      </span>
                      <span>{t("cart-delete")} </span>
                    </div>
                  </div>

                  <div className={styles.amount}>
                    <span className={styles.minus}>-</span>
                    <span>{t("cart-amount")}</span>
                    <span className={styles.plus}>+</span>
                  </div>

                  <div className={styles.price}>{item.price}$</div>
                </div>
              )
            );
          })}
        </div>
        <div className={styles.payment}>
          <div>
            <h2> {t("cart-payment")}</h2>
            <div className={styles.add}>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
              >
                <path
                  d="M12 4C16.411 4 20 7.589 20 12C20 16.411 16.411 20 12 20C7.589 20 4 16.411 4 12C4 7.589 7.589 4 12 4ZM12 2C6.477 2 2 6.477 2 12C2 17.523 6.477 22 12 22C17.523 22 22 17.523 22 12C22 6.477 17.523 2 12 2ZM17 11H13V7H11V11H7V13H11V17H13V13H17V11Z"
                  fill="white"
                />
              </svg>
              <span>{t("cart-addPay")}</span>
            </div>
          </div>
          <div className={styles.cardInfo}>
            <div>
              <div className={styles.cardName}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="59"
                  height="59"
                  viewBox="0 0 59 59"
                  fill="none"
                >
                  <path
                    d="M53.4688 51.625H5.53125C2.47063 51.625 0 49.1544 0 46.0938V12.9062C0 9.84563 2.47063 7.375 5.53125 7.375H53.4688C56.5294 7.375 59 9.84563 59 12.9062V46.0938C59 49.1544 56.5294 51.625 53.4688 51.625ZM5.53125 11.0625C4.49875 11.0625 3.6875 11.8738 3.6875 12.9062V46.0938C3.6875 47.1263 4.49875 47.9375 5.53125 47.9375H53.4688C54.5013 47.9375 55.3125 47.1263 55.3125 46.0938V12.9062C55.3125 11.8738 54.5013 11.0625 53.4688 11.0625H5.53125Z"
                    fill="#D6EFD8"
                  />
                  <path
                    d="M48.6381 23.7105H45.8725C45.0244 23.7105 44.3975 23.9686 43.9919 24.8168L38.6819 36.9118H42.4431C42.4431 36.9118 43.1069 35.2893 43.2175 34.9205H47.8269C47.9744 35.363 48.2694 36.8749 48.2694 36.8749H51.625L48.6381 23.7474V23.7105ZM44.25 32.1918C44.5819 31.4174 45.6881 28.5043 45.6881 28.5043C45.6881 28.578 46.02 27.7299 46.1306 27.2874L46.3887 28.4674L47.2369 32.3024H44.25V32.2286V32.1918ZM38.94 32.5605C38.94 35.2893 36.4694 37.0961 32.6712 37.0961C31.0487 37.0961 29.5 36.7643 28.6519 36.3955L29.1681 33.4086L29.6106 33.593C30.7906 34.1093 31.565 34.2936 32.9662 34.2936C33.9987 34.2936 35.105 33.888 35.105 33.003C35.105 32.413 34.6625 32.0443 33.2244 31.3805C31.86 30.7168 30.0531 29.6843 30.0531 27.8405C30.0531 25.2593 32.5606 23.4893 36.1375 23.4893C37.5019 23.4893 38.645 23.7474 39.3825 24.0793L38.8662 26.9186L38.6081 26.6605C37.9444 26.4024 37.1331 26.1443 35.8794 26.1443C34.515 26.218 33.8881 26.808 33.8881 27.3243C33.8881 27.9143 34.6625 28.3568 35.8794 28.9468C37.9444 29.9055 38.9031 31.0118 38.9031 32.5605H38.94ZM7.375 23.8211L7.44875 23.563H13.0169C13.7912 23.563 14.3812 23.8211 14.5656 24.6693L15.7825 30.4955C14.5656 27.398 11.6894 24.8536 7.375 23.8211Z"
                    fill="black"
                  />
                  <path
                    d="M23.5998 23.7107L17.9579 36.8382H14.1229L10.8779 25.8495C13.2011 27.3245 15.1554 29.6845 15.8561 31.2701L16.2617 32.6345L19.7648 23.637H23.5998V23.7107ZM25.1117 23.637H28.6517L26.4023 36.8382H22.8623L25.1117 23.637Z"
                    fill="black"
                  />
                </svg>
                <span>{t("cart-visa")}</span>
              </div>
              <div className={styles.cardNumber}>**** **** **** 2314</div>
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12 21C13.1819 21 14.3522 20.7672 15.4442 20.3149C16.5361 19.8626 17.5282 19.1997 18.364 18.364C19.1997 17.5282 19.8626 16.5361 20.3149 15.4442C20.7672 14.3522 21 13.1819 21 12C21 10.8181 20.7672 9.64778 20.3149 8.55585C19.8626 7.46392 19.1997 6.47177 18.364 5.63604C17.5282 4.80031 16.5361 4.13738 15.4442 3.68508C14.3522 3.23279 13.1819 3 12 3C9.61305 3 7.32387 3.94821 5.63604 5.63604C3.94821 7.32387 3 9.61305 3 12C3 14.3869 3.94821 16.6761 5.63604 18.364C7.32387 20.0518 9.61305 21 12 21ZM11.768 15.64L16.768 9.64L15.232 8.36L10.932 13.519L8.707 11.293L7.293 12.707L10.293 15.707L11.067 16.481L11.768 15.64Z"
                fill="#D6EFD8"
              />
            </svg>
          </div>
          <div className={styles.cardInfo}>
            <div>
              <div className={styles.cardName}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="56"
                  height="44"
                  viewBox="0 0 56 44"
                  fill="none"
                >
                  <g clip-path="url(#clip0_1564_1001)">
                    <path
                      d="M10.1804 43.7814V40.8692C10.1804 39.7526 9.50795 39.0248 8.35535 39.0248C7.77916 39.0248 7.15485 39.2189 6.7226 39.8499C6.3866 39.316 5.90645 39.0248 5.1861 39.0248C4.70573 39.0248 4.22579 39.1703 3.84145 39.7042V39.1218H2.83301V43.7814H3.84145V41.2088C3.84145 40.3839 4.2737 39.9954 4.94613 39.9954C5.61813 39.9954 5.95457 40.4323 5.95457 41.2088V43.7814H6.96301V41.2088C6.96301 40.3839 7.44295 39.9954 8.06726 39.9954C8.7397 39.9954 9.0757 40.4323 9.0757 41.2088V43.7814H10.1804ZM25.1147 39.1218H23.4821V37.7143H22.4737V39.1218H21.5613V40.0438H22.4735V42.1797C22.4735 43.2477 22.9057 43.8785 24.0583 43.8785C24.4906 43.8785 24.9705 43.733 25.3069 43.5389L25.0186 42.665C24.7305 42.8592 24.3945 42.9078 24.1544 42.9078C23.6742 42.9078 23.4821 42.6166 23.4821 42.1311V40.0438H25.1147V39.1218ZM33.6625 39.0245C33.0864 39.0245 32.7022 39.316 32.462 39.7042V39.1218H31.4536V43.7814H32.462V41.1604C32.462 40.3839 32.798 39.947 33.4224 39.947C33.6144 39.947 33.8546 39.9956 34.0467 40.0441L34.3348 39.0734C34.1427 39.0248 33.8546 39.0248 33.6625 39.0248M20.7449 39.5103C20.2645 39.1705 19.5923 39.025 18.872 39.025C17.7196 39.025 16.9514 39.6074 16.9514 40.5296C16.9514 41.3064 17.5275 41.743 18.536 41.8887L19.0161 41.9374C19.5444 42.0342 19.8325 42.1799 19.8325 42.4227C19.8325 42.7623 19.4484 43.0051 18.7759 43.0051C18.1035 43.0051 17.5754 42.7623 17.2392 42.5198L16.7591 43.2963C17.2874 43.6846 18.0077 43.8787 18.7278 43.8787C20.0725 43.8787 20.8409 43.2479 20.8409 42.3741C20.8409 41.5489 20.2166 41.112 19.2561 40.9665L18.7759 40.9179C18.3437 40.8692 18.0077 40.7724 18.0077 40.4812C18.0077 40.1413 18.3437 39.9472 18.872 39.9472C19.4484 39.9472 20.0246 40.1898 20.3127 40.3355L20.7449 39.5103ZM47.5407 39.025C46.9643 39.025 46.5802 39.3162 46.34 39.7044V39.1221H45.3315V43.7816H46.34V41.1606C46.34 40.3841 46.6762 39.9472 47.3003 39.9472C47.4926 39.9472 47.7328 39.9959 47.9248 40.0443L48.2129 39.0736C48.0209 39.025 47.7328 39.025 47.5407 39.025ZM34.671 41.4518C34.671 42.8594 35.6313 43.8787 37.1201 43.8787C37.7923 43.8787 38.2725 43.7332 38.7526 43.3449L38.2725 42.5198C37.8884 42.811 37.5042 42.9565 37.072 42.9565C36.2556 42.9565 35.6794 42.3741 35.6794 41.4518C35.6794 40.5783 36.2556 39.9956 37.072 39.9472C37.5042 39.9472 37.8884 40.0927 38.2725 40.3841L38.7526 39.559C38.2725 39.1705 37.7923 39.025 37.1201 39.025C35.6313 39.025 34.671 40.0443 34.671 41.4518ZM43.9871 41.4518V39.1221H42.9787V39.7044C42.6424 39.2678 42.1623 39.025 41.538 39.025C40.2414 39.025 39.233 40.0443 39.233 41.4518C39.233 42.8594 40.2414 43.8787 41.538 43.8787C42.2102 43.8787 42.6906 43.6361 42.9787 43.1992V43.7816H43.9871V41.4518ZM40.2894 41.4518C40.2894 40.6267 40.8176 39.9472 41.6819 39.9472C42.4983 39.9472 43.0747 40.5783 43.0747 41.4518C43.0747 42.277 42.4983 42.9565 41.6819 42.9565C40.8176 42.9078 40.2894 42.277 40.2894 41.4518ZM28.2362 39.025C26.8916 39.025 25.931 39.9956 25.931 41.4518C25.931 42.908 26.8914 43.8787 28.2841 43.8787C28.9564 43.8787 29.6288 43.6846 30.1571 43.2479L29.6767 42.5198C29.2926 42.811 28.8124 43.0051 28.3323 43.0051C27.7079 43.0051 27.0836 42.7139 26.9395 41.8885H30.3491V41.5005C30.3973 39.9956 29.533 39.025 28.2362 39.025ZM28.236 39.8986C28.8601 39.8986 29.2926 40.2871 29.3884 41.0152H26.9874C27.0834 40.3841 27.5157 39.8986 28.236 39.8986ZM53.2549 41.4518V37.2776H52.2464V39.7044C51.9102 39.2678 51.4301 39.025 50.8058 39.025C49.5092 39.025 48.5008 40.0443 48.5008 41.4518C48.5008 42.8594 49.5092 43.8787 50.8058 43.8787C51.4782 43.8787 51.9584 43.6361 52.2464 43.1992V43.7816H53.2549V41.4518ZM49.5574 41.4518C49.5574 40.6267 50.0854 39.9472 50.9499 39.9472C51.7663 39.9472 52.3425 40.5783 52.3425 41.4518C52.3425 42.277 51.7663 42.9565 50.9499 42.9565C50.0854 42.9078 49.5574 42.277 49.5574 41.4518ZM15.8464 41.4518V39.1221H14.838V39.7044C14.5018 39.2678 14.0216 39.025 13.3973 39.025C12.1008 39.025 11.0924 40.0443 11.0924 41.4518C11.0924 42.8594 12.1008 43.8787 13.3973 43.8787C14.0698 43.8787 14.5499 43.6361 14.838 43.1992V43.7816H15.8464V41.4518ZM12.1008 41.4518C12.1008 40.6267 12.6291 39.9472 13.4934 39.9472C14.3097 39.9472 14.8861 40.5783 14.8861 41.4518C14.8861 42.277 14.3097 42.9565 13.4934 42.9565C12.6291 42.9078 12.1008 42.277 12.1008 41.4518Z"
                      fill="black"
                    />
                    <path
                      d="M20.4092 3.7373H35.5357V31.2099H20.4092V3.7373Z"
                      fill="#FF5F00"
                    />
                    <path
                      d="M21.3695 17.4737C21.3695 11.8919 23.9625 6.94094 27.9482 3.73735C25.0191 1.40756 21.3216 0 17.2878 0C7.73128 0 0 7.81453 0 17.4737C0 27.133 7.73128 34.9475 17.2876 34.9475C21.3213 34.9475 25.0189 33.5399 27.9482 31.2099C23.9625 28.055 21.3695 23.0556 21.3695 17.4737Z"
                      fill="#EB001B"
                    />
                    <path
                      d="M55.9443 17.4737C55.9443 27.1327 48.213 34.9475 38.6567 34.9475C34.6229 34.9475 30.9254 33.5399 27.9961 31.2099C32.0298 28.0066 34.575 23.0556 34.575 17.4737C34.575 11.8919 31.9817 6.94094 27.9961 3.73735C30.9252 1.40756 34.6229 0 38.6567 0C48.213 0 55.9443 7.86318 55.9443 17.4737Z"
                      fill="#F79E1B"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_1564_1001">
                      <rect width="56" height="44" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
                <span>{t("cart-master")}</span>
              </div>
              <div className={styles.cardNumber}>**** **** **** 6213</div>
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12 21C13.1819 21 14.3522 20.7672 15.4442 20.3149C16.5361 19.8626 17.5282 19.1997 18.364 18.364C19.1997 17.5282 19.8626 16.5361 20.3149 15.4442C20.7672 14.3522 21 13.1819 21 12C21 10.8181 20.7672 9.64778 20.3149 8.55585C19.8626 7.46392 19.1997 6.47177 18.364 5.63604C17.5282 4.80031 16.5361 4.13738 15.4442 3.68508C14.3522 3.23279 13.1819 3 12 3C9.61305 3 7.32387 3.94821 5.63604 5.63604C3.94821 7.32387 3 9.61305 3 12C3 14.3869 3.94821 16.6761 5.63604 18.364C7.32387 20.0518 9.61305 21 12 21ZM11.768 15.64L16.768 9.64L15.232 8.36L10.932 13.519L8.707 11.293L7.293 12.707L10.293 15.707L11.067 16.481L11.768 15.64Z"
                fill="#1A5319"
              />
            </svg>
          </div>
        </div>
      </div>
      <div className={styles.summary}>
        <h2>{t("cart-summary")}</h2>
        <div className={styles.total}>
          <div>
            <input type="text" name="promo" placeholder="promocode" />
            <label htmlFor="promo">{t("apply")}</label>
          </div>
          <div className={styles.costDetails}>
            <div>
              <span>{t("cart-total")}</span>
              <span>{totalPrice}$</span>
            </div>
            <div>
              <span>{t("cart-shipping")}</span>
              <span>10$</span>
            </div>
          </div>
          <div className={styles.totalCost}>
            <span>{t("cart-totalCost")}</span>
            <span>{totalPrice + 10}$</span>
          </div>
        </div>
        <Link to={"/checkout"}>{t("next")}</Link>
        <Link to={"/productsDetails"}>{t("back")}</Link>
        <div className={styles.imgContanier}>
          <img src={`${process.env.PUBLIC_URL}/total.png`} alt="plant1" />
        </div>
      </div>
    </div>
  );
};

export default OrderDetailsContent;
